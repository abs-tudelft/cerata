<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Cerata: Main Page</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="cerata.svg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Cerata
   </div>
   <div id="projectbrief">A library to generate structural hardware designs</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Cerata Documentation</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><object type="image/svg+xml" data="docs/cerata.svg" style="pointer-events: none;">Cerata logo</object> </p><h1>Cerata</h1>
<p>Cerata is a Hardware Construction Library written in C++17. It allows you to describe hardware structures using C++. The hardware structures are basically graphs (components and instance graphs) with nodes (signals, ports, parameters, literals).</p>
<p>Rather than suffering from the verbosity of languages such as VHDL and Verilog, a developer can use Cerata to construct potentially complex and nested types, and "drag" them around the design with a few lines of code. The hassle of turning the graph representation into something synthesizable for various output targets (especially FPGA) is left to Cerata's back-ends.</p>
<p>Furthermore, it allows you to programmatically inspect and modify constructed graphs. This allows other code to reflect on designs that were generated, for whatever purpose. Examples include: adding profilers to streams or creating an optimized infrastructure for bus interfaces required by some components way down in your design hierarchy.</p>
<p>Cerata currently only focuses on structure, not on behavior. This means that Cerata is definitely not a High-Level Synthesis tool. Although it might look somewhat similar at a first glance, it is also not an Embedded Hardware Construction Language like Chisel, where you can also describe combinatorial and sequential transformations on your signals and ports. That project is much more advanced, and you should check it out, if you like Scala and don't mind having a relatively large and complicated dependency. Cerata is just a bit lighter-weight but less feature-rich for now. And it was interesting to develop.</p>
<p>Currently, there is no front-end language for Cerata, or a storage format for the graphs. We developed Cerata mainly as a companion library of Fletcher, but it does not include anything specific to Fletcher in its codebase.</p>
<h2>Example:</h2>
<p>This simple example generates a component with a bunch of instantiations of two other components. If you care or think it's relevant, this would be about 150 lines of VHDL.</p>
<div class="fragment"><div class="line"> {C++}</div>
<div class="line">// A parameter node.</div>
<div class="line">auto x_width = parameter(&quot;width&quot;);</div>
<div class="line"> </div>
<div class="line">// A type using the parameter node as generic.</div>
<div class="line">auto rec = record({field(&quot;foo&quot;, bit()),</div>
<div class="line">                   field(&quot;bar&quot;, vector(x_width)),</div>
<div class="line">                   field(&quot;parent&quot;, stream(&quot;child&quot;, stream(&quot;data&quot;, vector(32))))});</div>
<div class="line"> </div>
<div class="line">// A size parameter for the port array.</div>
<div class="line">auto size = parameter(&quot;array_size&quot;, 0);</div>
<div class="line"> </div>
<div class="line">// A component declaration using all of the above.</div>
<div class="line">auto x = component(&quot;x&quot;, {x_width,</div>
<div class="line">                         size,</div>
<div class="line">                         port_array(&quot;a&quot;, rec, size, Port::IN)});</div>
<div class="line"> </div>
<div class="line">// Another parameter for the next component.</div>
<div class="line">auto y_width = parameter(&quot;width&quot;);</div>
<div class="line">// Another component. The record type is rebound to use the new parameter as generic.</div>
<div class="line">auto y = component(&quot;y&quot;, {y_width,</div>
<div class="line">                         port(&quot;b&quot;, (*rec)({y_width}), Port::OUT)});</div>
<div class="line"> </div>
<div class="line">// The top-level component.</div>
<div class="line">auto top = component(&quot;top&quot;);</div>
<div class="line">// Instantiate one X component.</div>
<div class="line">auto xi = top-&gt;Instantiate(x);</div>
<div class="line"> </div>
<div class="line">// Instantiate three Y components.</div>
<div class="line">for (int i = 0; i &lt; 3; i++) {</div>
<div class="line">  auto yi = top-&gt;Instantiate(y);</div>
<div class="line">  // Append the port array &quot;a&quot; on X, and source it with port &quot;b&quot; of the new Y instance.</div>
<div class="line">  xi-&gt;prt_arr(&quot;a&quot;)-&gt;Append() &lt;&lt;= yi-&gt;prt(&quot;b&quot;);</div>
<div class="line">}</div>
</div><!-- fragment --><p>This example would be easy to write in VHDL too, using the "for ... generate" statement. However, we can also programmatically inspect the components that we generated in Cerata.</p>
<p>In the following example, we'll generate a few bottom-level components that will randomly have some output bit. We can just inspect the generated component before we instance it and connect that bit at the top-level.</p>
<div class="fragment"><div class="line"> {C++}</div>
<div class="line">// Generate a bunch of components randomly containing some output.</div>
<div class="line">std::vector&lt;std::shared_ptr&lt;Component&gt;&gt; random_components;</div>
<div class="line">for (int i = 0; i &lt; 3; i++) {</div>
<div class="line">  // Another parameter for the next component.</div>
<div class="line">  auto comp = component(&quot;RandomComp&quot; + std::to_string(i), {port(&quot;clk&quot;, bit(), Port::IN)});</div>
<div class="line">  if (std::rand() % 2 == 1) {</div>
<div class="line">    comp-&gt;Add(port(&quot;o&quot;, bit(), Port::OUT));</div>
<div class="line">  }</div>
<div class="line">  random_components.push_back(comp);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">// Instantiate the top level.</div>
<div class="line">auto top = component(&quot;top&quot;, {port(&quot;clk&quot;, bit(), Port::IN)});</div>
<div class="line">int j = 0;</div>
<div class="line">for (int i = 0; i &lt; 3; i++) {</div>
<div class="line">  // Instantiate every random component.</div>
<div class="line">  auto inst = top-&gt;Instantiate(random_components[i]);</div>
<div class="line">  Connect(inst-&gt;prt(&quot;clk&quot;), top-&gt;prt(&quot;clk&quot;));</div>
<div class="line">  // Check if it has a port we&#39;d also want to expose at the top-level.</div>
<div class="line">  if (inst-&gt;Has(&quot;o&quot;)) {</div>
<div class="line">    auto top_port = port(&quot;o&quot; + std::to_string(j), bit(), Port::OUT);</div>
<div class="line">    top_port &lt;&lt;= inst-&gt;Get&lt;Port&gt;(&quot;o&quot;);</div>
<div class="line">    top-&gt;Add(top_port);</div>
<div class="line">    j++;</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --><p>This results in the following design:</p>
<p><object type="image/svg+xml" data="docs/example.svg" style="pointer-events: none;">Cerata example graph</object></p>
<p>Of course, components having random output bits might seem weird. But, suppose you're exploring randomized neuron configurations in neural networks, or you're building up a design bottom-up based on some external specification and it may or may not contain a bus interface. In most HDL or even HLS tools that FPGA vendor tools support, it would be rather painful to construct such designs. Now you can just use C++ to do it.</p>
<p>For more elaborate examples, check out the tests or check out Fletchgen. If there is interest for more elaborate documentation, please open an issue. </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Wed Mar 4 2020 13:45:04 for Cerata by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
